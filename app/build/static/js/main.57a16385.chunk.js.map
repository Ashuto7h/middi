{"version":3,"sources":["types.ts","state/appReducer.ts","state/initialState.ts","components/Loading.tsx","components/avatar.svg","components/Message.tsx","components/ActionButton.tsx","components/ChatBox.tsx","state/dispatchHelper.ts","env.js","components/RegisterForm.tsx","components/done.svg","components/LoginForm.tsx","sequences/auth.ts","App.js","sequences/introduction.ts","reportWebVitals.js","index.js"],"names":["Events","AUTH_STATE_CHANGED","MESSAGE_ADDED","LAST_MESSAGE_REMOVED","ACTIONS_SET","EMIT_EVENT","SET_STATE","reducer","state","action","console","log","type","messages","payload","uuid","id","splice","length","eventEmitted","MESSAGE_REMOVED","actions","auth","initialState","loggedIn","name","Loading","className","_extends","Object","assign","target","i","arguments","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","d","fill","_ref3","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9","_ref10","mask","_ref11","_ref12","SvgAvatar","_ref","svgRef","title","titleId","props","width","height","viewBox","xmlns","ref","ForwardRef","Message","message","dispatch","useContext","AppContext","delay","messageClass","text","sender","showLoader","Component","useState","typing","setTyping","waiting","setWaiting","useEffect","typingTimeout","setTimeout","dispatchOnSend","delayTimeout","clearTimeout","ActionButton","label","callback","onClick","ChatBox","appState","queueIndex","setQueueIndex","setMessages","next","updatedMessages","timer","map","dispatchHelper","params","error","apiUrl","RegisterForm","email","password","formData","setFormData","loading","setLoading","REGISTRATION_SUBMITTED","submit","handleInputChange","event","value","fetch","env","method","headers","body","JSON","stringify","then","res","postRegistrationSequence","onChange","placeholder","x1","y1","x2","y2","gradientUnits","offset","stopColor","cx","cy","r","points","SvgDone","xmlnsXlink","undefined","LoginForm","submitted","setSubmitted","LOGIN_SUBMITTED","credentials","json","postLoginSequence","registrationSequence","loginSequence","messagesToAdd","newState","createContext","App","useReducer","freeze","user","catch","finally","Provider","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.57a16385.chunk.js","sourcesContent":["export type Action = {\n    label: string;\n    callback: Function;\n}\n\ntype MessageClasses = 'message--initial' | 'message--grouped' | 'component';\nexport type Message = {\n    uuid?: string;\n    messageClass: MessageClasses;\n    sender: 'bot' | 'user';\n    text: string;\n    delay: number;\n    showLoader: boolean;\n    dispatchOnSend?: { type: string, payload: any };\n    Component?: any\n}\n\ntype AuthState = {\n    loggedIn: boolean;\n    name: string;\n}\n\nexport type AppState = {\n    auth: AuthState;\n    messages: Message[];\n    actions: Action[];\n    eventEmitted: any;\n};\n\nexport type Context = {\n    appState: AppState;\n    dispatch: Function;\n};\n\nexport enum Events {\n    REGISTRATION_SUBMITTED = 'REGISTRATION_SUBMITTED',\n    LOGIN_SUBMITTED = 'LOGIN_SUBMITTED',\n    MESSAGE_REMOVED = 'MESSAGE_REMOVED'\n}","import { AppState, Events } from '../types';\nimport { v4 as uuid } from 'uuid';\n\nexport const AUTH_STATE_CHANGED = \"AUTH_STATE_CHANGED\";\nexport const MESSAGE_ADDED = 'MESSAGE_ADDED';\nexport const LAST_MESSAGE_REMOVED = 'LAST_MESSAGE_REMOVED';\nexport const ACTIONS_SET = 'ACTIONS_SET';\nexport const EMIT_EVENT = 'EMIT_EVENT';\nexport const SET_STATE = 'SET_STATE';\n\nexport const reducer = (state: AppState, action: { type: string, payload: any}): AppState => {\n  console.log(action);\n  switch (action.type) {\n    case MESSAGE_ADDED:\n        return {\n            ...state,\n            messages: [\n                ...state.messages,\n                {\n                  ...action.payload,\n                  uuid: action.payload.id || uuid()\n                }\n            ]\n        }\n    case LAST_MESSAGE_REMOVED:\n      return {\n          ...state,\n          messages: state.messages.splice(0, state.messages.length-1),\n          eventEmitted: Events.MESSAGE_REMOVED\n      }\n    case ACTIONS_SET:\n        return {\n            ...state,\n            actions: action.payload\n        }\n    case AUTH_STATE_CHANGED:\n      return {\n        ...state,\n        auth: action.payload\n      };\n    case EMIT_EVENT:\n      return {\n        ...state,\n        eventEmitted: action.payload\n      }\n    case SET_STATE:\n      return action.payload;\n  }\n  return state;\n};","import { AppState } from '../types'\n\nexport const initialState: AppState = {\n    auth: {\n        loggedIn: false,\n        name: ''\n    },\n    messages: [],\n    actions: [],\n    eventEmitted: null\n};","import React from 'react';\n\nconst Loading = () => {\n    return (\n        <div className=\"loading\">\n            <div className=\"loading__dot\"></div>\n            <div className=\"loading__dot\"></div>\n            <div className=\"loading__dot\"></div>\n        </div>\n    )\n}\n\nexport default Loading;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M56.9775 31.4748C56.9775 46.76 44.6754 59.151 29.5 59.151C14.3246 59.151 2.02246 46.76 2.02246 31.4748C2.02246 16.1897 14.3246 3.7987 29.5 3.7987C44.6754 3.7987 56.9775 16.1897 56.9775 31.4748Z\",\n  fill: \"#6E2FBC\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M48.2919 31.9611C50.1878 31.9611 51.725 33.1807 51.725 34.6852V39.0192C51.725 40.5237 50.1878 41.7435 48.2919 41.7435C46.396 41.7435 44.8591 40.5237 44.8591 39.0192V34.6852C44.8591 33.1807 46.396 31.9611 48.2919 31.9611Z\",\n  fill: \"#BFBFE3\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M14.0772 34.6852V39.0192C14.0772 40.5237 12.5403 41.7435 10.6445 41.7435C8.74854 41.7435 7.21143 40.5237 7.21143 39.0192V34.6852C7.21143 33.1807 8.74854 31.9611 10.6445 31.9611C12.5403 31.9611 14.0772 33.1807 14.0772 34.6852Z\",\n  fill: \"#BFBFE3\"\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M28.0589 21.8765C28.5372 21.2668 29.0829 21.4043 29.7362 21.8199C29.2157 22.3368 28.8105 22.8249 28.1262 22.4887C27.9236 22.3893 27.9054 22.0721 28.0589 21.8765ZM30.7008 17.8732C30.6157 17.5959 30.4868 17.3485 30.1609 17.4144C29.7633 17.4946 29.9022 17.7988 29.9652 18.0509C30.1506 18.7933 30.2964 19.5423 30.243 20.3115C30.2107 20.7748 30.207 21.3088 29.485 20.8565C29.3025 20.7421 29.051 20.7302 28.8277 20.6921C28.1577 20.5779 27.6269 20.7911 27.3087 21.4151C26.9995 22.022 27.0652 22.5918 27.5415 23.0948C28.0561 23.6375 28.6394 23.5209 29.2072 23.2271C29.54 23.0547 29.8329 22.8046 30.2602 22.5087C30.772 24.0424 30.3169 25.3464 29.7022 26.6351C29.5581 26.9382 29.0967 27.3041 29.6575 27.5838C30.111 27.8097 30.2086 27.2992 30.3549 27.0338C31.2149 25.4766 31.6538 23.8531 30.8837 22.1252C30.7069 21.7282 30.7877 21.4006 30.8748 21.0279C31.1246 19.9623 31.0203 18.9111 30.7008 17.8732\",\n  fill: \"#3A7189\"\n});\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M18.7641 25.1761H40.5725C44.4694 25.1761 47.6283 28.3579 47.6283 32.2828V43.2658C47.6283 47.1907 44.4694 50.3725 40.5725 50.3725H18.7641C14.8675 50.3725 11.7085 47.1907 11.7085 43.2658V32.2828C11.7085 28.3579 14.8675 25.1761 18.7641 25.1761Z\",\n  fill: \"#E5BED9\"\n});\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M23.7751 35.304C23.7751 36.4503 22.8889 37.3797 21.7957 37.3797C20.7024 37.3797 19.8162 36.4503 19.8162 35.304C19.8162 34.1576 20.7024 33.2282 21.7957 33.2282C22.8889 33.2282 23.7751 34.1576 23.7751 35.304Z\",\n  fill: \"#5B3758\"\n});\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M40.0745 35.6986C40.0745 36.8449 39.1882 37.7743 38.095 37.7743C37.0017 37.7743 36.1155 36.8449 36.1155 35.6986C36.1155 34.5522 37.0017 33.6228 38.095 33.6228C39.1882 33.6228 40.0745 34.5522 40.0745 35.6986Z\",\n  fill: \"#5B3758\"\n});\n\nvar _ref9 = /*#__PURE__*/React.createElement(\"mask\", {\n  id: \"path-8-inside-1\",\n  fill: \"white\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M36.0897 42.2341C34.7529 45.7507 25.5291 46.5014 24.5195 42.2914Z\"\n}));\n\nvar _ref10 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M168.796 92.6787C149.979 142.181 111.698 164.655 93.9459 172.947C73.3101 182.587 52.9954 186.352 35.6942 187.024C19.0422 187.671 -5.62546 185.86 -32.1425 173.817C-60.3077 161.025 -100.208 130.98 -113.537 75.3992L162.576 9.18372C149.752 -44.2926 111.383 -72.852 85.2731 -84.7105C60.8113 -95.8203 38.7224 -97.2494 24.6696 -96.7034C9.96772 -96.1321 -7.72737 -92.9513 -26.2261 -84.31C-41.8411 -77.0158 -78.4684 -55.9542 -96.6168 -8.21046L168.796 92.6787Z\",\n  fill: \"#5B3758\",\n  mask: \"url(#path-8-inside-1)\"\n});\n\nvar _ref11 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M35.6255 10.57C35.3221 9.38012 34.368 8.62665 33.0553 8.4837C32.9413 8.47131 32.8303 8.46527 32.7221 8.46527C31.581 8.46527 30.7692 9.13641 30.3051 10.0537C29.8202 9.0964 28.9925 8.47544 27.7857 8.47544C27.7058 8.47544 27.6242 8.47816 27.541 8.4837C26.3407 8.5634 25.3097 9.28635 24.9848 10.6956C24.4004 13.2307 27.1664 15.822 30.3052 18.3428C33.6432 15.839 36.2474 13.0089 35.6255 10.5697L35.6255 10.57Z\",\n  fill: \"#FF0000\"\n});\n\nvar _ref12 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M35.6255 10.57C35.3221 9.38012 34.368 8.62665 33.0553 8.4837C32.9413 8.47131 32.8303 8.46527 32.7221 8.46527C31.581 8.46527 30.7692 9.13641 30.3051 10.0537C29.8202 9.0964 28.9925 8.47544 27.7857 8.47544C27.7058 8.47544 27.6242 8.47816 27.541 8.4837C26.3407 8.5634 25.3097 9.28635 24.9848 10.6956C24.4004 13.2307 27.1664 15.822 30.3052 18.3428C33.6432 15.839 36.2474 13.0089 35.6255 10.5697L35.6255 10.57Z\",\n  fill: \"#FF0000\"\n});\n\nfunction SvgAvatar(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    className: \"avatar\",\n    width: 60,\n    height: 60,\n    viewBox: \"0 0 59 62\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgAvatar);\nexport default __webpack_public_path__ + \"static/media/avatar.9787f221.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useEffect, useState, useContext } from 'react';\nimport * as types from '../types';\nimport Loading from './Loading';\nimport { AppContext } from '../App';\nimport { ReactComponent as Avatar } from './avatar.svg';\n\ntype MessageProps = {\n    message: types.Message;\n};\n\nconst Message = ({ message }: MessageProps) => {\n    const { dispatch } = useContext(AppContext);\n    const { delay, messageClass, text, sender, showLoader, Component } = message;\n    const [typing, setTyping] = useState(!!delay);\n    const [waiting, setWaiting] = useState(!!delay);\n\n    useEffect(() => {\n        const typingTimeout = setTimeout(() => {\n            setTyping(!typing);\n            if (message.dispatchOnSend) {\n                dispatch(message.dispatchOnSend);\n            }\n        }, delay)\n        const delayTimeout = setTimeout(() => {\n            setWaiting(!typing);\n        }, delay*0.2)\n        return () => {\n            clearTimeout(typingTimeout);\n            clearTimeout(delayTimeout);\n        };\n    }, [delay]);\n\n    return (\n        <>\n            { !waiting &&\n                (typing\n                    ? showLoader && <div className=\"message message--loading\">\n                        <Loading />\n                    </div>\n                    : <>\n                        <div className={`message message--sender-${sender} ${messageClass}`}>\n                            {messageClass === 'message--initial' && <Avatar />}\n                            {messageClass === 'component'\n                                ? <Component />\n                                : <p>{ text }</p>\n                            }\n                        </div>\n                    </>\n                )\n            }\n        </>\n    )\n};\n\nexport default Message;","import React from 'react';\nimport * as types from '../types';\n\ntype ActionButtonProps = {\n    action: types.Action;\n}\n\nconst ActionButton = ({ action }: ActionButtonProps) => {\n    const { label, callback } = action;\n\n    return (\n        <button className=\"action-button\" onClick={() => callback()}>{ label }</button>\n    )\n};\n\nexport default ActionButton;","import React, { useState, useContext, useEffect } from 'react';\nimport { AppContext } from '../App';\nimport * as types from '../types';\nimport Message from './Message';\nimport ActionButton from './ActionButton';\nimport { v4 as uuid } from 'uuid';\n\nconst ChatBox = () => {\n  const { appState, dispatch } = useContext<types.Context>(AppContext);\n  const [queueIndex, setQueueIndex] = useState<number>(0);\n  const [messages, setMessages] = useState<types.Message[]>([]);\n\n  useEffect(() => {\n    const next = appState.messages[queueIndex]\n    const updatedMessages = [ ...messages, next ];\n    setMessages(updatedMessages);\n    if (queueIndex < appState.messages.length - 1) {\n      const delay = next.delay;\n      const timer = setTimeout(() => {\n        setQueueIndex(queueIndex + 1);\n      }, delay);\n      return () => {\n        clearTimeout(timer);\n      }\n    }\n  }, [queueIndex])\n\n  useEffect(() => {\n    if (messages.length !== appState.messages.length) {\n      setQueueIndex(queueIndex + 1);\n    }\n  }, [appState.messages])\n\n  return (\n    <div className=\"chatbox\">\n      <div className=\"chatbox__messages\">\n        {messages.map((message: types.Message) => (\n          message && <Message message={message} key={message.uuid} />\n        ))}\n      </div>\n      <div className=\"chatbox__actions\">\n        {appState.actions && appState.actions.map((action: types.Action) => (\n          <ActionButton action={action} key={uuid()} />\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default ChatBox;\n","const dispatchHelper = {\n  dispatch: (params: any) => {\n    console.error('store is not ready')\n  },\n}\n  \nexport default dispatchHelper;","export default {\n    apiUrl: process.env.NODE_ENV === 'development' ? 'http://localhost:8080/api' : ''\n};","import React, { useState, useContext, useEffect, useRef } from 'react';\nimport { AppContext } from '../App';\nimport { Events } from '../types';\nimport env from '../env';\nimport Loading from './Loading';\nimport { postRegistrationSequence } from '../sequences/auth';\n\ntype RegisterForm = {\n    email: string;\n    password: string;\n    name: string;\n};\n\nconst RegisterForm = () => {\n    const { appState } = useContext(AppContext);\n    const [formData, setFormData] = useState({ name: '', email: '', password: '' });\n    const [loading, setLoading] = useState(false);\n\n    useEffect(() => {\n        if (appState.eventEmitted === Events.REGISTRATION_SUBMITTED) {\n            submit();\n        }\n    }, [appState.eventEmitted])\n\n    const handleInputChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        setFormData({\n            ...formData,\n            [event.target.name]: event.target.value\n        });\n    }\n\n    const submit = () => {\n        setLoading(true);\n        fetch(`${env.apiUrl}/auth/register`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(formData)\n        }).then(res => {\n            setLoading(false);\n            postRegistrationSequence();\n        })\n    }\n\n    return (\n        <div className=\"register-form\">\n            { loading\n                ? <Loading />\n                : <form>\n                    <label>Nickname <input name=\"name\" type=\"text\" onChange={handleInputChange} placeholder=\"What should I call you?\" /></label>\n                    <label>Email <input name=\"email\" type=\"email\" onChange={handleInputChange} placeholder=\"Used for logging in\" /></label>\n                    <label>Password <input name=\"password\" type=\"password\" placeholder=\"Choose something strong\" onChange={handleInputChange} /></label>\n                </form>\n            }\n        </div>\n    )\n};\n\nexport default RegisterForm;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"style\", null, \".cls-1{fill:url(#linear-gradient);}.cls-2{fill:#4da67f;}.cls-3{fill:url(#linear-gradient-2);}.cls-4{fill:#c7cdd8;}.cls-5{fill:#47566a;}\"), /*#__PURE__*/React.createElement(\"linearGradient\", {\n  id: \"linear-gradient\",\n  x1: 64,\n  y1: 127,\n  x2: 64,\n  y2: 1,\n  gradientUnits: \"userSpaceOnUse\"\n}, /*#__PURE__*/React.createElement(\"stop\", {\n  offset: 0,\n  stopColor: \"#6ab891\"\n}), /*#__PURE__*/React.createElement(\"stop\", {\n  offset: 1,\n  stopColor: \"#85cba9\"\n})), /*#__PURE__*/React.createElement(\"linearGradient\", {\n  id: \"linear-gradient-2\",\n  x1: 64,\n  y1: 110,\n  x2: 64,\n  y2: 18,\n  gradientUnits: \"userSpaceOnUse\"\n}, /*#__PURE__*/React.createElement(\"stop\", {\n  offset: 0,\n  stopColor: \"#dde1e8\"\n}), /*#__PURE__*/React.createElement(\"stop\", {\n  offset: 1,\n  stopColor: \"#f3f4f5\"\n})));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Done\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-1\",\n  d: \"M127,64c0,5.44-5.14,10.13-6.48,15.15-1.39,5.19.68,11.81-2,16.36s-9.46,6.12-13.2,9.86-5.25,10.53-9.86,13.2-11.17.56-16.36,2c-5,1.34-9.71,6.48-15.15,6.48s-10.13-5.14-15.15-6.48c-5.19-1.39-11.81.68-16.36-2s-6.12-9.46-9.86-13.2-10.53-5.25-13.2-9.86S8.87,84.34,7.48,79.15C6.14,74.13,1,69.44,1,64S6.14,53.87,7.48,48.85C8.87,43.66,6.8,37,9.43,32.49s9.46-6.12,13.2-9.86,5.25-10.53,9.86-13.2,11.17-.56,16.36-1.95C53.87,6.14,58.56,1,64,1S74.13,6.14,79.15,7.48C84.34,8.87,91,6.8,95.51,9.43s6.12,9.46,9.86,13.2,10.53,5.25,13.2,9.86.56,11.17,2,16.36C121.86,53.87,127,58.56,127,64Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-2\",\n  d: \"M3,57.55A60.74,60.74,0,0,0,5.74,75.13C1.69,67.87-1.09,65.06,3,57.55Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-2\",\n  d: \"M120.21,80.71c-.72,4.9.73,10.69-1.64,14.8-2.67,4.61-9.46,6.12-13.2,9.86s-5.25,10.53-9.86,13.2-11.17.56-16.36,2c-5,1.34-9.71,6.48-15.15,6.48s-10.13-5.14-15.15-6.48c-5.19-1.39-11.81.68-16.36-2s-6.12-9.46-9.86-13.2-10.53-5.25-13.2-9.86c-2.37-4.11-.92-9.9-1.64-14.8a61,61,0,0,0,112.42,0Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-2\",\n  d: \"M122.26,75.13A60.74,60.74,0,0,0,125,57.55C129.07,65,126.33,67.82,122.26,75.13Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-2\",\n  d: \"M7.79,80.71a58.75,58.75,0,0,1-2-5.57A15.09,15.09,0,0,1,7.79,80.71Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-2\",\n  d: \"M122.26,75.14a58.75,58.75,0,0,1-2.05,5.57A15.09,15.09,0,0,1,122.26,75.14Z\"\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  className: \"cls-3\",\n  cx: 64,\n  cy: 64,\n  r: 46\n}), /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-4\",\n  d: \"M64,18a46,46,0,0,1,45.9,49,46,46,0,0,0-91.8,0A46,46,0,0,1,64,18Z\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"cls-2\",\n  points: \"56 85.66 37.17 66.83 42.83 61.17 56 74.34 85.17 45.17 90.83 50.83 56 85.66\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-5\",\n  d: \"M64,17a47,47,0,1,0,47,47A47.07,47.07,0,0,0,64,17Zm0,92a45,45,0,1,1,45-45A45,45,0,0,1,64,109Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-5\",\n  d: \"M124.39,54.52c-3.13-5.22-3.48-6.32-3.39-12.76.12-9.2-1.16-11.51-9.33-16.06-5.48-3.05-6.3-3.87-9.37-9.37-4.59-8.24-7-9.45-16.06-9.33-6.43.08-7.52-.25-12.76-3.39-8.07-4.83-10.88-4.84-19,0C49.29,6.75,48.19,7.09,41.76,7c-9.1-.12-11.47,1.09-16.06,9.33-3.05,5.48-3.87,6.3-9.37,9.37C8.14,30.26,6.89,32.57,7,41.76c.09,6.41-.24,7.51-3.39,12.76-4.83,8.07-4.84,10.88,0,19C6.74,78.7,7.09,79.8,7,86.24c-.12,9.2,1.16,11.51,9.33,16.06,5.48,3,6.3,3.87,9.37,9.37,4.6,8.26,7,9.45,16.06,9.33,6.43-.08,7.52.25,12.76,3.39,8.07,4.83,10.88,4.84,19,0,5.23-3.13,6.32-3.47,12.76-3.39,9.17.11,11.49-1.12,16.06-9.33,3-5.48,3.87-6.3,9.37-9.37,8.19-4.56,9.44-6.87,9.33-16.06-.09-6.41.24-7.51,3.39-12.76C129.22,65.41,129.23,62.6,124.39,54.52Zm-1.72,17.93c-3.32,5.54-3.76,7-3.67,13.82.11,8.45-.79,10.1-8.3,14.28-5.82,3.24-6.9,4.32-10.15,10.15-4.19,7.53-5.84,8.4-14.28,8.3-6.81-.09-8.26.35-13.82,3.67-7.38,4.43-9.46,4.46-16.9,0C50.76,119.8,49,119,43.4,119c-3.56,0-7.58.36-10.41-1.28-4.29-2.48-5.79-9.18-9.65-13S12.78,99.29,10.3,95,9.87,84.22,8.45,78.89C7.08,73.79,2,69,2,64s5.1-9.87,6.45-14.89C9.87,43.79,7.86,37.21,10.3,33s9.18-5.79,13-9.65,5.37-10.56,9.65-13,10.8-.43,16.12-1.85C54.21,7.08,59,2,64,2s9.87,5.1,14.89,6.45C84.22,9.87,90.79,7.86,95,10.3s5.79,9.18,9.65,13,10.56,5.37,13,9.65.43,10.79,1.85,16.12C120.92,54.21,126,59,126,64,126,66.9,124.31,69.72,122.67,72.45Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-5\",\n  d: \"M85.89,44.45a1.05,1.05,0,0,0-1.44,0L56,72.9,43.55,60.45a1.05,1.05,0,0,0-1.44,0c-6.06,6.06-6,5.79-6,6.38S34.93,66,55.28,86.38a1,1,0,0,0,1.44,0C93.93,49.17,91.85,51.46,91.85,50.83S91.94,50.5,85.89,44.45ZM56,84.21,38.61,66.83l4.22-4.22L55.28,75.06a1,1,0,0,0,1.44,0L85.17,46.61l4.22,4.22Z\"\n}));\n\nfunction SvgDone(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    className: \"icon-success\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    viewBox: \"0 0 128 128\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), _ref2, title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"Done\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref3);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgDone);\nexport default __webpack_public_path__ + \"static/media/done.c7fd411e.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState, useContext, useEffect, useRef } from 'react';\nimport { AppContext } from '../App';\nimport { Events } from '../types';\nimport env from '../env';\nimport Loading from './Loading';\nimport { postLoginSequence, postRegistrationSequence } from '../sequences/auth';\nimport { ReactComponent as Done } from './done.svg';\n\ntype LoginForm = {\n    email: string;\n    password: string;\n};\n\nconst LoginForm = () => {\n    const { appState, dispatch } = useContext(AppContext);\n    const [formData, setFormData] = useState({ name: '', email: '', password: '' });\n    const [loading, setLoading] = useState(false);\n    const [submitted, setSubmitted] = useState(false);\n\n    useEffect(() => {\n        if (appState.eventEmitted === Events.LOGIN_SUBMITTED) {\n            submit();\n        }\n    }, [appState.eventEmitted])\n\n    const handleInputChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        setFormData({\n            ...formData,\n            [event.target.name]: event.target.value\n        });\n    }\n\n    const submit = () => {\n        setLoading(true);\n        fetch(`${env.apiUrl}/auth/login`, {\n            method: 'POST',\n            credentials: 'include',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(formData)\n        })\n        .then(res => res.json())\n        .then(res => {\n            const { name } = res;\n            setLoading(false);\n            setSubmitted(true)\n            postLoginSequence(name, appState);\n        })\n    }\n\n    return (\n        <div className=\"form login-form\">\n            <form>\n                <h3>👤 Login</h3>\n                {loading\n                    ? <Loading />\n                    : !submitted \n                        ? <>\n                            <label>Email <input name=\"email\" type=\"email\" onChange={handleInputChange} /></label>\n                            <label>Password <input name=\"password\" type=\"password\" onChange={handleInputChange} /></label>\n                        </>\n                        : <div className=\"form__placeholder-success\"><Done /></div>\n                }\n            </form>\n        </div>\n    )\n};\n\nexport default LoginForm;","import dispatchHelper from '../state/dispatchHelper';\nimport { ACTIONS_SET, MESSAGE_ADDED, EMIT_EVENT, LAST_MESSAGE_REMOVED, AUTH_STATE_CHANGED, SET_STATE } from '../state/appReducer';\nimport RegisterForm from '../components/RegisterForm';\nimport { AppState, Events, Message } from '../types';\nimport LoginForm from '../components/LoginForm';\nimport { v4 as uuid } from 'uuid';\n\nexport const registrationSequence = (): void => {\n    // Add registration component\n    dispatchHelper.dispatch({\n        type: MESSAGE_ADDED,\n        payload: {\n            messageClass: 'component',\n            sender: 'bot',\n            text: null,\n            delay: 1000,\n            showLoader: false,\n            Component: RegisterForm\n        }\n    })\n    // Submit button\n    dispatchHelper.dispatch({\n        type: ACTIONS_SET,\n        payload: [\n            { label: 'Submit', callback: () => {\n                dispatchHelper.dispatch({\n                    type: EMIT_EVENT,\n                    payload: Events.REGISTRATION_SUBMITTED\n                })\n            }}\n        ]\n    })\n}\n\nexport const loginSequence = (): void => {\n    dispatchHelper.dispatch({\n        type: MESSAGE_ADDED,\n        payload: {\n            messageClass: 'component',\n            sender: 'bot',\n            text: null,\n            delay: 1000,\n            showLoader: false,\n            Component: LoginForm\n        }\n    })\n    dispatchHelper.dispatch({\n        type: ACTIONS_SET,\n        payload: [\n            { label: 'Submit', callback: () => {\n                dispatchHelper.dispatch({\n                    type: EMIT_EVENT,\n                    payload: Events.LOGIN_SUBMITTED\n                })\n            }}\n        ]\n    })\n}\n\nexport const postRegistrationSequence = () => {\n    dispatchHelper.dispatch({\n        type: LAST_MESSAGE_REMOVED,\n        payload: null\n    })\n\n    dispatchHelper.dispatch({\n        type: MESSAGE_ADDED,\n        payload: {\n            messageClass: 'message--inital',\n            sender: 'bot',\n            text: `Nice job! We're on our way to helping you track your adherence 🚀`,\n            delay: 1500,\n            showLoader: false\n        }\n    });\n\n    dispatchHelper.dispatch({\n        type: MESSAGE_ADDED,\n        payload: {\n            messageClass: 'message--grouped',\n            sender: 'bot',\n            text: `First thing's first though, let's get an inhaler setup for you to track`,\n            delay: 1500,\n            showLoader: true\n        }\n    });\n}\n\nexport const postLoginSequence = (name: string, state: AppState) => {\n\n    const messagesToAdd: Message[] = [\n        {\n            messageClass: 'message--initial',\n            sender: 'bot',\n            text: `Welcome back ${name}! Good to see you again 😁`,\n            delay: 1500,\n            showLoader: false,\n            uuid: uuid()\n        },\n        {\n            messageClass: 'message--grouped',\n            sender: 'bot',\n            text: `How can I help you today?`,\n            delay: 1500,\n            showLoader: true,\n            uuid: uuid(),\n            dispatchOnSend: {\n                type: 'ACTIONS_SET',\n                payload: [{\n                    label: 'Record a puff',\n                    callback: () => {\n\n                    }\n                },\n                {\n                    label: 'Add an inhaler',\n                    callback: loginSequence\n                }]\n            }\n        }\n    ]\n\n    const newState: AppState = {\n        ...state,\n        auth: {\n            loggedIn: true,\n            name\n        },\n        messages: [ ...state.messages, ...messagesToAdd ]\n    }\n\n    dispatchHelper.dispatch({\n        type: SET_STATE,\n        payload: newState\n    });\n}","import { createContext, useEffect, useReducer, useState } from 'react';\nimport { AUTH_STATE_CHANGED, MESSAGE_ADDED, reducer, SET_STATE } from './state/appReducer';\nimport { initialState } from './state/initialState';\nimport './styles/styles.scss';\nimport './components/ChatBox';\nimport ChatBox from './components/ChatBox';\nimport dispatchHelper from './state/dispatchHelper';\nimport env from './env';\nimport { authenticatedIntroSequence, unauthenticatedIntroSequence } from './sequences/introduction';\n\nexport const AppContext = createContext();\n\nconst App = () => {\n  const [appState, dispatch] = useReducer(reducer, initialState);\n  const [loading, setLoading] = useState(true);\n\n\n  const initializeApp = () => {\n    fetch(`${env.apiUrl}/auth/auth-user`, {\n      credentials: 'include',\n    })\n    .then(res => res.json())\n    .then(res => {\n      // authenticated user\n      dispatch({\n        type: SET_STATE,\n        payload: {\n          ...appState,\n          messages: authenticatedIntroSequence(res.user.name)\n        }\n      });\n      dispatch({\n        type: AUTH_STATE_CHANGED,\n        payload: {\n          loggedIn: true,\n          name: res.user.name\n        }\n      });\n    })\n    .catch(() => {\n      // unauthenticated user\n      dispatch({\n        type: SET_STATE,\n        payload: {\n          ...appState,\n          messages: unauthenticatedIntroSequence()\n        }\n      });\n    })\n    .finally(() => {\n      setLoading(false);\n    })\n  }\n\n  useEffect(() => {\n    dispatchHelper.dispatch = (payload) => dispatch(payload);\n    Object.freeze(dispatchHelper);\n    initializeApp()\n  }, [])\n\n  return (\n    <AppContext.Provider value={{ appState, dispatch}}>\n      <div className=\"app\">\n        <header className=\"header\">Middi</header>\n        {!loading && <ChatBox loggedIn={false} />}\n      </div>\n    </AppContext.Provider>\n  );\n}\n\nexport default App;\n","import { Message } from '../types';\nimport { registrationSequence, loginSequence } from './auth';\nimport { v4 as uuid } from 'uuid';\n\nexport const unauthenticatedIntroSequence = (): Message[] => [{\n    messageClass: 'message--initial',\n    sender: 'bot',\n    text: 'Hi!',\n    delay: 500,\n    showLoader: false,\n    uuid: uuid()\n},\n{\n    messageClass: 'message--grouped',\n    sender: 'bot',\n    text: `My name's Middi. I'm here to help you track your inhaler usage.`,\n    delay: 2000,\n    showLoader: true,\n    uuid: uuid()\n},\n{\n    messageClass: 'message--grouped',\n    sender: 'bot',\n    text: `You can visit any time and I'll help you measure your inhaler adherence by asking a few simple questions.`,\n    delay: 5000,\n    showLoader: true,\n    uuid: uuid()\n},\n{\n    messageClass: 'message--grouped',\n    sender: 'bot',\n    text: `Ready to get started?`,\n    delay: 7000,\n    showLoader: true,\n    uuid: uuid(),\n    dispatchOnSend: {\n        type: 'ACTIONS_SET',\n        payload: [{\n            label: 'Log in',\n            callback: loginSequence\n        },\n        {\n            label: 'Sign up',\n            callback: registrationSequence\n        }]\n    }\n}]\n\nexport const authenticatedIntroSequence = (name: string): Message[] => [{\n    messageClass: 'message--initial',\n    sender: 'bot',\n    text: `Hi ${name}! Good to see you again 🙂`,\n    delay: 500,\n    showLoader: false,\n    uuid: uuid()\n},\n{\n    messageClass: 'message--grouped',\n    sender: 'bot',\n    text: `How can I help you?`,\n    delay: 1500,\n    showLoader: true,\n    uuid: uuid(),\n    dispatchOnSend: {\n        type: 'ACTIONS_SET',\n        payload: [{\n            label: 'Record a puff',\n            callback: () => {\n\n            }\n        },\n        {\n            label: 'Add an inhaler',\n            callback: () => {}\n        }]\n    }\n}]\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}